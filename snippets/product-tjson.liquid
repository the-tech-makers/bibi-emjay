{
  {%- for variant in product.variants -%}
  "{{ variant.id | json }}":{
    "id": {{ variant.id | json }},
    "title": {{ variant.title | json }},
    "available": {{ variant.available | json }},
    "options": {{ variant.options | json }},
    "price": {{ variant.price | json }},
    "compare_at_price": {{ variant.compare_at_price | json }},
    "inventory_quantity": {{ variant.inventory_quantity | json }},
    "inventory_policy": {{ variant.inventory_policy | json }},
    "featured_media": {
      "id": {{ variant.featured_media.id | json }},
      "src": {{ variant.featured_media.preview_image.src | json }}
    },
    "sku": {{ variant.sku | json }}{% if variant.unit_price_measurement %},
    "unit_price": {{ variant.unit_price | json }},
    "unit_price_measurement": {
      "measured_type": {{ variant.unit_price_measurement.measured_type | json }},
      "quantity_value": {{ variant.unit_price_measurement.quantity_value | json }},
      "quantity_unit": {{ variant.unit_price_measurement.quantity_unit | json }},
      "reference_value": {{ variant.unit_price_measurement.reference_value | json }},
      "reference_unit": {{ variant.unit_price_measurement.reference_unit | json }}
    }
    {% endif %}    
  }{%- unless forloop.last -%},{%- endunless -%}
  {%- endfor -%}
}